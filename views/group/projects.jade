extends home
block append head
  script(type='text/javascript', src='/static/js/ajaxform.js')
  script(type='text/javascript', src='/static/js/ajaxform-bootstrap.js')

block groupNav
  - var urlBase = '/group/' + page.group.id + '-' + page.group.name;
  li: a(href=urlBase) About
  li.active: a(href=urlBase + '/members') Members
  li: a(href=urlBase + '/projects') Projects

/*
extends ../mainLayout
block head
  script(type='text/javascript', src='/static/js/ajaxform.js')
  script(type='text/javascript', src='/static/js/ajaxform-bootstrap.js')
*/

block content
  .container
    .col-md-3
      h3 #{page.group.name}
      hr
      ul.nav.nav-pills.nav-stacked
        li: a(href='/group/' + page.group.id + '-' + page.group.name) About
        li: a(href='/group/' + page.group.id + '-' + page.group.name + '/members') Members
        li.active: a(href='/group/' + page.group.id + '-' + page.group.name + '/projects') Projects
    .col-md-9
      block userContent
        if session && session.user && session.user.username === page.user.username
          h1 Your Projects
          hr
          a.btn.btn-default(href='/group/projects/add') Create a project
          br
        else
          h1 #{page.group.name}'s Projects
          hr
        br
        if projects
          .panel.panel-default
            table.table
              tr
                th Name
                th Description
                th Member Groups
                th Joined
                th &nbsp;
              each project in projects
                tr
                  td: a(href='/project/' + project.id + '-' + project.name) #{project.name}
                  td #{project.description}
                  td #{project.members}
                  td #{project.joined}
                  td &nbsp;
          if addprojects
            if addprojects.length > 0
              form#addproject.form-inline
                .form-group
                  label.hidden-xs(for='project') Add Group to Project &nbsp;
                  select.form-control(name='project')
                    each group in addprojects
                      option(value=project.id) #{project.name}
                button.btn.btn-default(type='submit') Add
              script(type='text/javascript').
                $('document').ready(function(){
                  forms.addproject.onSuccess(function(res) {
                    if (res.status === 0) {
                      window.location.reload();
                    }
                  });
                });
            else
              p #{page.group.name} is already a member of all of your projects.

        else
          p #{page.group.name} is not a member of any projects yet.
